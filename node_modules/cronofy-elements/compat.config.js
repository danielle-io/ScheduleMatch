const path = require("path");
const baseConfig = require("./webpack.config.js");
const GitRevisionPlugin = require("git-revision-webpack-plugin");
const gitRevisionPlugin = new GitRevisionPlugin();

module.exports = (env, argv) => ({
    ...baseConfig(env, argv),
    entry: [
        "core-js/stable",
        "regenerator-runtime/runtime",
        "whatwg-fetch",
        "./src/js/main.js"
    ],
    output: {
        path: path.resolve(__dirname, "build"),
        filename:
            argv.mode === "development"
                ? `CronofyElements.dev.ie.js`
                : `CronofyElements.${gitRevisionPlugin.version()}.ie.js`,
        library: "CronofyElements",
        libraryTarget: "umd",
        umdNamedDefine: true
    }
});
