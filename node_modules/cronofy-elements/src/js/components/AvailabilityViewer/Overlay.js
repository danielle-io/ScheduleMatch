import React, { useContext } from "react";
import { css, jsx } from "@emotion/core";

import Slot from "./Slot";

import { ThemeContext } from "./AvailabilityViewer";

const Overlay = ({ day, columnCount }) => {
    const [theme, setTheme] = useContext(ThemeContext);

    const overlay = day.slots.map((slot, i) => {
        let lastAvailable = false;
        let blockBelow = false;
        const topSlot = i < theme.slotHeightCalc.multiple;

        const height = lastAvailable
            ? theme.slotHeightCalc.height * theme.slotHeightCalc.multiple
            : theme.slotHeightCalc.height;
        return (
            <div
                css={css`
                    display: block;
                    height: ${height}px;
                `}
                key={`${day.day}_${i}`}
            >
                <Slot
                    slot={slot}
                    day={day}
                    columnCount={columnCount}
                    topSlot={topSlot}
                    blockBelow={blockBelow}
                />
            </div>
        );
    });

    return overlay;
};

export default Overlay;
