import React, { useContext } from "react";
import { css, jsx } from "@emotion/core";

import { I18nContext, StatusContext, ThemeContext } from "./AvailabilityViewer";
import TimeZoneDisplay from "./TimeZoneDisplay";

const LegendItem = ({ available }) => {
    const [theme, setTheme] = useContext(ThemeContext);
    const i18n = useContext(I18nContext);
    return (
        <div
            css={css`
                display: flex;
                flex-shrink: 0;
                margin-right: 20px;
            `}
            className={`${theme.prefix}__legend-item`}
        >
            <div
                css={css`
                    width: 20px;
                    height: 20px;
                    flex-shrink: 0;
                    border: 1px solid ${theme.colors.hairline};
                    margin-right: 10px;
                    background: ${available
                        ? theme.colors.available
                        : theme.colors.unavailable};
                `}
                className={`${theme.prefix}__example ${
                    theme.prefix
                }__example--${available ? "available" : "unavailable"}`}
            />
            <span className={`${theme.prefix}__legend-label`}>
                {available ? i18n.t("available") : i18n.t("unavailable")}
            </span>
        </div>
    );
};

const Legend = () => {
    const [status, setStatus] = useContext(StatusContext);
    const [theme, setTheme] = useContext(ThemeContext);
    return (
        <div
            css={css`
                flex-grow: 1;
                display: flex;
                @media (max-width: 550px) {
                    flex-wrap: wrap;
                }
            `}
            className={`${theme.prefix}__legend`}
        >
            <LegendItem available={true} />
            <LegendItem available={false} />
            {status.customtzid ? <TimeZoneDisplay /> : null}
        </div>
    );
};

export default Legend;
