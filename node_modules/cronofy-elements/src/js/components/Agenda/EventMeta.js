import React, { useContext } from "react";
import { css, jsx } from "@emotion/core";

import Location from "./Location";

import { truncateString } from "../../helpers/utils";
import { getCalendarColors } from "../../helpers/colors";

import { ThemeContext } from "./Agenda";

const EventMeta = ({ data, calIndex }) => {
    const theme = useContext(ThemeContext);
    let colors = getCalendarColors(theme.colors, calIndex);
    return (
        <div className={`${theme.prefix}__event__meta`}>
            {data.location ? (
                <Location
                    locationString={data.location.description}
                    calIndex={calIndex}
                    styles={css`
                        @media (max-width: 450px) {
                            display: block;
                            max-width: 60px;
                            overflow: hidden;
                            line-height: 16px;
                            height: 16px;
                            padding: 0 5px;
                            position: relative;
                        }
                    `}
                >
                    {truncateString(data.location.description, 18)}
                </Location>
            ) : null}

            {data.attendees && data.attendees.length > 1 ? (
                <div className={`${theme.prefix}__event__attendees`}>
                    <span className={`${theme.prefix}__event__attendee`} />
                    <span className={`${theme.prefix}__event__attendee`} />
                    <span className={`${theme.prefix}__event__attendee-count`}>
                        {data.attendees.length}
                    </span>
                </div>
            ) : null}
        </div>
    );
};
export default EventMeta;
